    Blocking waiting for file lock on build directory
warning: comparison is useless due to type limits
   --> astraweave-core\src\tools.rs:589:17
    |
589 |         assert!(cover.len() >= 0);
    |                 ^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(unused_comparisons)]` on by default

warning: unused variable: `cds`
   --> astraweave-core\tests\perception_tests.rs:128:17
    |
128 |     if let Some(cds) = w.cooldowns(companion) {
    |                 ^^^ help: if this is intentional, prefix it with an underscore: `_cds`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `astraweave-core` (lib test) generated 1 warning
warning: `astraweave-core` (test "perception_tests") generated 1 warning
warning: field `0` is never read
  --> astraweave-core\tests\cross_crate_stability_tests.rs:51:21
   |
51 |     struct Position(f32);
   |            -------- ^^^
   |            |
   |            field in this struct
   |
   = help: consider removing this field
   = note: `Position` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis
   = note: `#[warn(dead_code)]` on by default

warning: `astraweave-core` (test "cross_crate_stability_tests") generated 1 warning
    Finished `test` profile [optimized + debuginfo] target(s) in 14.81s
     Running unittests src\lib.rs (target\debug\deps\astraweave_core-ff7676f01e29a7d0.exe)

running 292 tests
test capture_replay::tests::test_capture_state_file_content ... ok
test capture_replay::tests::test_replay_state_invalid_json ... ok
test capture_replay::tests::test_capture_state_overwrites_existing ... ok
test capture_replay::tests::test_replay_state_with_steps ... ok
test capture_replay::tests::test_capture_state_creates_file ... ok
test capture_replay::tests::test_capture_replay_roundtrip_with_entities ... ok
test capture_replay::tests::test_replay_state_wrong_structure ... ok
test capture_replay::tests::test_replay_state_loads_file ... ok
test capture_replay::tests::test_replay_state_nonexistent_file ... ok
test capture_replay::tests::test_capture_state_with_empty_world ... ok
test capture_replay::tests::test_capture_state_with_many_obstacles ... ok
test capture_replay::tests::test_determinism_verification ... ok
test capture_replay::tests::test_world_from_serde_empty ... ok
test capture_replay::tests::test_snapshot_serialization ... ok
test capture_replay::tests::test_world_from_serde_with_data ... ok
test capture_replay::tests::test_world_serde_from_world_with_obstacles ... ok
test capture_replay::tests::test_world_serde_obstacles_sorted ... ok
test ecs_adapter::tests::ecs_drives_legacy_world_tick ... ok
test ecs_adapter::tests::movement_emits_events ... ok
test ecs_adapter::tests::sys_bridge_sync_adds_legacy_id ... ok
test ecs_bridge::tests::test_bidirectional_consistency ... ok
test capture_replay::tests::test_world_serde_default ... ok
test capture_replay::tests::test_world_serde_from_world_empty ... ok
test capture_replay::tests::test_world_serde_roundtrip ... ok
test ecs_adapter::tests::ecs_components_update_cooldowns ... ok
test ecs_adapter::tests::simple_movement_toward_goal ... ok
test ecs_adapter::tests::parity_ecs_vs_legacy_movement_and_cooldowns ... ok
test ecs_bridge::tests::test_complex_insert_remove_sequence ... ok
test ecs_bridge::tests::test_ecs_entities_multiple ... ok
test ecs_bridge::tests::test_ecs_entities_single ... ok
test ecs_bridge::tests::test_get_by_legacy ... ok
test ecs_bridge::tests::test_get_legacy_nonexistent ... ok
test ecs_bridge::tests::test_insert_multiple_pairs ... ok
test ecs_bridge::tests::test_insert_pair_basic ... ok
test ecs_bridge::tests::test_ecs_entities_empty ... ok
test ecs_bridge::tests::test_entity_bridge_default ... ok
test ecs_bridge::tests::test_get_by_ecs ... ok
test ecs_bridge::tests::test_insert_alias ... ok
test ecs_bridge::tests::test_insert_pair_overwrites_existing_legacy ... ok
test ecs_bridge::tests::test_get_nonexistent ... ok
test ecs_bridge::tests::test_insert_pair_overwrites_existing_ecs ... ok
test ecs_bridge::tests::test_insert_same_pair_twice ... ok
test ecs_bridge::tests::test_remove_by_ecs ... ok
test ecs_bridge::tests::test_remove_ecs_nonexistent ... ok
test ecs_bridge::tests::test_remove_legacy ... ok
test ecs_components::tests::test_ccooldowns_default ... ok
test ecs_components::tests::test_cdesired_pos_default ... ok
test ecs_components::tests::test_cooldown_key_from_str_custom ... ok
test ecs_components::tests::test_cooldown_key_from_str_known ... ok
test ecs_bridge::tests::test_remove_by_legacy ... ok
test ecs_bridge::tests::test_remove_ecs ... ok
test ecs_bridge::tests::test_remove_legacy_nonexistent ... ok
test ecs_components::tests::test_chealth_default ... ok
test ecs_components::tests::test_cooldown_key_display ... ok
test ecs_components::tests::test_cooldown_key_from_string ... ok
test ecs_components::tests::test_cammo_default ... ok
test ecs_components::tests::test_cteam_default ... ok
test ecs_events::tests::test_ai_planned_event ... ok
test ecs_events::tests::test_events_default ... ok
test ecs_events::tests::test_events_drain ... ok
test ecs_events::tests::test_moved_event_creation ... ok
test ecs_events::tests::test_moved_event_equality ... ok
test capture_replay::tests::test_replay_state_zero_steps ... ok
test ecs_events::tests::test_ai_planning_failed_event ... ok
test ecs_events::tests::test_events_clear ... ok
test ecs_events::tests::test_events_send_and_len ... ok
test ecs_events::tests::test_tool_validation_failed_event ... ok
test ecs_components::tests::test_cpos_default ... ok
test metrics::tests::test_histograms ... ok
test metrics::tests::test_gauges ... ok
test ecs_events::tests::test_health_changed_event ... ok
test metrics::tests::test_counters ... ok
test perception::tests::test_build_snapshot_basic ... ok
test perception::tests::test_build_snapshot_comprehensive ... ok
test perception::tests::test_build_snapshot_enemy_los_close ... ok
test perception::tests::test_build_snapshot_cooldowns ... ok
test perception::tests::test_build_snapshot_enemy_los_far ... ok
test perception::tests::test_build_snapshot_no_objective ... ok
test perception::tests::test_build_snapshot_obstacles ... ok
test perception::tests::test_build_snapshot_time_tracking ... ok
test perception::tests::test_build_snapshot_with_objective ... ok
test perception::tests::test_build_snapshot_companion_state ... ok
test perception::tests::test_build_snapshot_enemy_id_tracking ... ok
test perception::tests::test_build_snapshot_enemy_last_seen ... ok
test perception::tests::test_build_snapshot_player_state ... ok
test perception::tests::test_perception_config_creation ... ok
test perception::tests::test_perception_config_zero_los ... ok
test schema::tests::test_action_step_attack ... ok
test perception::tests::test_build_snapshot_no_enemies ... ok
test schema::tests::test_action_step_move_to ... ok
test schema::tests::test_action_step_reload ... ok
test perception::tests::test_build_snapshot_multiple_enemies ... ok
test perception::tests::test_build_snapshot_pois_generated ... ok
test schema::tests::test_attack_type_serde ... ok
test schema::tests::test_cardinal_direction_to_unit_vector ... ok
test schema::tests::test_director_budget ... ok
test schema::tests::test_director_op_spawn_wave ... ok
test perception::tests::test_perception_config_large_los ... ok
test schema::tests::test_action_step_deserialization ... ok
test schema::tests::test_action_step_modify_terrain_serde ... ok
test schema::tests::test_all_action_steps_compile ... ok
test schema::tests::test_companion_state_default ... ok
test schema::tests::test_action_step_take_cover ... ok
test schema::tests::test_distance_category_midpoint ... ok
test schema::tests::test_companion_state_cooldowns ... ok
test schema::tests::test_enemy_state_default ... ok
test schema::tests::test_distance_category_to_range ... ok
test schema::tests::test_engine_error_display ... ok
test schema::tests::test_movement_speed_serde ... ok
test schema::tests::test_persistence_mode_default ... ok
test schema::tests::test_player_state_default ... ok
test schema::tests::test_poi_default ... ok
test schema::tests::test_strafe_direction_serde ... ok
test schema::tests::test_terrain_feature_type_default ... ok
test schema::tests::test_ivec2_default ... ok
test schema::tests::test_ivec2_equality ... ok
test schema::tests::test_plan_intent_default ... ok
test schema::tests::test_plan_intent_with_steps ... ok
test schema::tests::test_rect_structure ... ok
test schema::tests::test_relative_location_serde ... ok
test schema::tests::test_terrain_feature_type_serde ... ok
test schema::tests::test_terrain_generation_request_default ... ok
test schema::tests::test_terrain_generation_request_validate_empty_request_id ... ok
test schema::tests::test_terrain_generation_request_validate_intensity_negative ... ok
test schema::tests::test_terrain_generation_request_validate_success ... ok
test schema::tests::test_tool_registry ... ok
test sim::tests::test_sim_config_creation ... ok
test sim::tests::test_sim_config_different_dt ... ok
test sim::tests::test_step_with_different_dt_values ... ok
test tests::test_default_tool_registry_constraints ... ok
test schema::tests::test_terrain_generation_request_validate_intensity_too_high ... ok
test schema::tests::test_terrain_generation_request_validate_narrative_too_long ... ok
test schema::tests::test_world_snapshot_default ... ok
test sim::tests::test_step_doesnt_crash ... ok
test tests::test_default_tool_registry_cover_fire ... ok
test schema::tests::test_world_snapshot_with_data ... ok
test tests::test_default_tool_registry_has_four_tools ... ok
test tests::test_default_tool_registry_move_to ... ok
test sim::tests::test_step_multiple_times ... ok
test tests::test_default_tool_registry_revive ... ok
test tool_sandbox::tests::partial_failure_multi_step_stops_on_error ... ok
test tool_sandbox::tests::resource_maps_to_other ... ok
test tool_sandbox::tests::test_map_defensive_actions ... ok
test tool_sandbox::tests::test_map_equipment_actions ... ok
test tool_sandbox::tests::test_map_offensive_actions ... ok
test tool_sandbox::tests::test_map_tactical_actions ... ok
test tests::test_default_tool_registry_throw ... ok
test tool_sandbox::tests::los_and_cooldown_map_to_taxonomy ... ok
test tool_sandbox::tests::taxonomy_maps_correctly ... ok
test tool_sandbox::tests::test_all_error_types ... ok
test tool_sandbox::tests::test_map_movement_actions ... ok
test tool_sandbox::tests::test_tool_block_clone ... ok
test tool_sandbox::tests::test_map_legacy_actions ... ok
test tool_sandbox::tests::test_tool_block_debug ... ok
test tool_sandbox::tests::test_map_utility_actions ... ok
test tool_sandbox::tests::test_tool_block_equality ... ok
test tool_vocabulary::tests::test_schema_generation ... ok
test tool_vocabulary::tests::test_all_tools_present ... ok
test tool_vocabulary::tests::test_tools_by_category ... ok
test tool_vocabulary::tests::test_categories ... ok
test tools::tests::test_astar_path_around_obstacle ... ok
test tools::tests::test_astar_path_blocked_completely ... ok
test tools::tests::test_astar_path_same_position ... ok
test tools::tests::test_astar_path_complex_maze ... ok
test tools::tests::test_astar_path_out_of_bounds ... ok
test tools::tests::test_conversion_negative_coords ... ok
test tools::tests::test_find_cover_positions_basic ... ok
test tools::tests::test_find_cover_positions_respects_bounds ... ok
test tools::tests::test_find_cover_positions_with_obstacles ... ok
test tools::tests::test_los_blocked_by_obstacle ... ok
test tools::tests::test_los_clear_horizontal ... ok
test tools::tests::test_los_obstacle_not_on_line ... ok
test tools::tests::test_astar_path_straight_line ... ok
test tools::tests::test_find_cover_positions_excludes_obstacles ... ok
test tools::tests::test_find_cover_positions_no_cover ... ok
test tools::tests::test_glam_to_schema_conversion ... ok
test tools::tests::test_los_clear_vertical ... ok
test tools::tests::test_find_cover_positions_zero_radius ... ok
test tools::tests::test_los_same_position ... ok
test tools::tests::test_los_clear_no_obstacles ... ok
test tools::tests::test_path_exists_out_of_bounds ... ok
test tools::tests::test_path_exists_same_position ... ok
test tools::tests::test_path_blocked_completely ... ok
test tools::tests::test_path_exists_straight_line ... ok
test tools::tests::test_poi_creation ... ok
test tools::tests::test_path_exists_around_corner ... ok
test tools::tests::test_poi_inactive ... ok
test tools::tests::test_path_exists_with_obstacle ... ok
test tools::tests::test_roundtrip_conversion ... ok
test tools::tests::test_schema_to_glam_conversion ... ok
test tools::tests::test_tool_ctx_argspecs_coverfire ... ok
test tools::tests::test_tool_ctx_argspecs_moveto ... ok
test tools::tests::test_tool_ctx_argspecs_revive ... ok
test tools::tests::test_tool_ctx_argspecs_throw ... ok
test tools::tests::test_tool_ctx_basic_combat ... ok
test util::tests::test_manhattan_diagonal ... ok
test util::tests::test_manhattan_negative_coords ... ok
test util::tests::test_manhattan_same_position ... ok
test util::tests::test_manhattan_horizontal ... ok
test util::tests::test_manhattan_mixed_coords ... ok
test util::tests::test_manhattan_symmetric ... ok
test validation::tests::cover_fire_consumes_ammo_and_damages ... ok
test validation::tests::cover_fire_requires_ammo ... ok
test validation::tests::test_approach_action ... ok
test validation::tests::test_attack_damages_target ... ok
test validation::tests::test_charge_action ... ok
test validation::tests::test_coordinate_attack_action ... ok
test validation::tests::test_director_collapse_operation ... ok
test util::tests::test_manhattan_vertical ... ok
test validation::tests::test_director_fortify_operation ... ok
test validation::tests::test_aimed_shot_damages_target ... ok
test validation::tests::test_aoe_attack_action ... ok
test validation::tests::test_block_action ... ok
test validation::tests::test_call_reinforcements_action ... ok
test validation::tests::test_director_budget_enforcement ... ok
test validation::tests::test_director_collapse_budget_skip ... ok
test validation::tests::test_distract_action ... ok
test validation::tests::test_director_spawn_wave_operation ... ok
test validation::tests::test_equip_weapon_action ... ok
test validation::tests::test_heavy_attack_damages_target ... ok
test validation::tests::test_drop_item_action ... ok
test validation::tests::test_heal_ally ... ok
test validation::tests::test_heal_self ... ok
test validation::tests::test_dodge_action ... ok
test validation::tests::test_mark_target_action ... ok
test validation::tests::test_interact_action ... ok
test validation::tests::test_moveto_path_blocked ... ok
test validation::tests::test_parry_action ... ok
test validation::tests::test_invalid_actor_not_found ... ok
test validation::tests::test_multi_step_execution ... ok
test validation::tests::test_multi_step_plan ... ok
test validation::tests::test_moveto_validation_success ... ok
test validation::tests::test_patrol_action ... ok
test validation::tests::test_regroup_action ... ok
test validation::tests::test_quick_attack_damages_target ... ok
test validation::tests::test_request_cover_action ... ok
test validation::tests::test_retreat_action ... ok
test validation::tests::test_scan_action ... ok
test validation::tests::test_reload_refills_ammo ... ok
test validation::tests::test_revive_dead_ally ... ok
test validation::tests::test_set_ambush_action ... ok
test validation::tests::test_switch_weapon_action ... ok
test validation::tests::test_take_cover_action ... ok
test validation::tests::test_throw_smoke_los_blocked ... ok
test validation::tests::test_throw_smoke_success ... ok
test validation::tests::test_strafe_action ... ok
test validation::tests::test_taunt_action ... ok
test validation::tests::test_throw_explosive_action ... ok
test validation::tests::test_use_defensive_ability_action ... ok
test validation::tests::test_use_item_action ... ok
test validation::tests::test_wait_action ... ok
test validation::tests::test_throw_with_cooldown ... ok
test validation::tests::test_use_ability_action ... ok
test world::tests::test_ammo_mut ... ok
test world::tests::test_ammo_nonexistent_entity ... ok
test world::tests::test_all_of_team ... ok
test world::tests::test_cooldowns_mut ... ok
test world::tests::test_all_of_team_empty ... ok
test world::tests::test_ammo_getter ... ok
test world::tests::test_behavior_graph_assignment_and_retrieval ... ok
test world::tests::test_cooldowns_getter ... ok
test world::tests::test_destroy_entity_preserves_other_entities ... ok
test world::tests::test_destroy_entity_removes_all_components ... ok
test world::tests::test_enemies_of ... ok
test world::tests::test_enemies_of_empty ... ok
test world::tests::test_health_mut ... ok
test world::tests::test_health_nonexistent_entity ... ok
test world::tests::test_cooldowns_nonexistent_entity ... ok
test world::tests::test_obstacle_absent ... ok
test world::tests::test_destroy_entity_returns_false_for_nonexistent_entity ... ok
test world::tests::test_destroy_entity_updates_entities_list ... ok
test world::tests::test_entities ... ok
test world::tests::test_health_getter ... ok
test world::tests::test_name_getter ... ok
test world::tests::test_name_nonexistent_entity ... ok
test world::tests::test_obstacle_multiple ... ok
test world::tests::test_pos_of_nonexistent ... ok
test world::tests::test_pose_getter ... ok
test world::tests::test_spawn_entity ... ok
test world::tests::test_spawn_multiple_entities ... ok
test world::tests::test_team_nonexistent_entity ... ok
test world::tests::test_tick_cooldowns_bottom_at_zero ... ok
test world::tests::test_obstacle_present ... ok
test world::tests::test_pos_of ... ok
test world::tests::test_pose_mut ... ok
test world::tests::test_spawn_with_id_preserves_entity_id ... ok
test world::tests::test_team_getter ... ok
test world::tests::test_tick_updates_time ... ok
test world::tests::test_pose_nonexistent_entity ... ok
test world::tests::test_tick_decrements_cooldowns ... ok
test world::tests::test_world_default ... ok
test world::tests::test_world_new ... ok

test result: ok. 292 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.42s

     Running tests\cross_crate_stability_tests.rs (target\debug\deps\cross_crate_stability_tests-47e88ef8b04e65b4.exe)

running 12 tests
test test_behavior_graph_api ... ok
test test_behavior_node_variants ... ok
test test_core_plan_intent ... ok
test test_core_tool_registry ... ok
test test_ecs_query_api ... ok
test test_ecs_world_api ... ok
test test_action_step_serialization ... ok
test test_behavior_status_api ... ok
test test_core_action_step_variants ... ok
test test_ecs_app_api ... ok
test test_core_world_snapshot ... ok
test test_entity_api ... ok

test result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s

     Running tests\ecs_integration_tests.rs (target\debug\deps\ecs_integration_tests-564cb0677dbc5206.exe)

running 25 tests
test test_cammo_component ... ok
test test_clegacy_id_component ... ok
test test_chealth_component ... ok
test test_ai_planning_failed_event ... ok
test test_cpos_component ... ok
test test_cooldown_key_from_str ... ok
test test_entity_bridge_insert_and_get ... ok
test test_entity_bridge_insert_pair ... ok
test test_ccooldowns_component ... ok
test test_cdesired_pos_component ... ok
test test_component_defaults ... ok
test test_cooldown_key_display ... ok
test test_cteam_component ... ok
test test_entity_bridge_ecs_entities_list ... ok
test test_entity_bridge_multiple_mappings ... ok
test test_ai_planned_event ... ok
test test_entity_bridge_remove_by_legacy ... ok
test test_events_send_and_drain ... ok
test test_health_changed_event ... ok
test test_entity_bridge_remove_by_ecs ... ok
test test_events_clear ... ok
test test_events_multiple_send ... ok
test test_entity_bridge_overwrite_mapping ... ok
test test_moved_event ... ok
test test_tool_validation_failed_event ... ok

test result: ok. 25 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests\full_system_determinism.rs (target\debug\deps\full_system_determinism-dd07383b461dfc2e.exe)

running 7 tests
test test_component_update_determinism ... ok
test test_entity_ordering_determinism ... ok
test test_multiple_runs_same_seed_determinism ... ok
test test_cooldown_tick_determinism ... ok
test test_different_seeds_produce_different_results ... ok
test test_obstacle_determinism ... ok
test test_100_frame_replay_determinism ... ok

test result: ok. 7 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests\perception_tests.rs (target\debug\deps\perception_tests-9517a137782fa27a.exe)

running 9 tests
test test_build_snapshot_los_filtering ... ok
test test_build_snapshot_multiple_enemies ... ok
test test_build_snapshot_basic ... ok
test test_build_snapshot_cooldowns_transferred ... ok
test test_build_snapshot_enemy_hp_tracking ... ok
test test_build_snapshot_no_objective ... ok
test test_build_snapshot_time_propagation ... ok
test test_build_snapshot_position_tracking ... ok
test test_perception_config_los_max ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests\performance_integration.rs (target\debug\deps\performance_integration-4090aae7326a2bbd.exe)

running 5 tests
test test_ai_planning_latency_under_load ... ok
test test_frame_budget_never_exceeded ... ok
test test_1000_entity_60fps_capacity ... ok
test test_memory_allocation_stability ... ok
test test_stress_10k_entities_graceful_degradation ... ok

test result: ok. 5 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.17s

     Running tests\schema_tests.rs (target\debug\deps\schema_tests-544d59cbda0b328a.exe)

running 12 tests
test test_actionstep_combat_variants ... ok
test test_actionstep_movement_variants ... ok
test test_companionstate_edge_cases ... ok
test test_enemystate_edge_cases ... ok
test test_planintent_construction ... ok
test test_ivec2_equality ... ok
test test_planintent_default ... ok
test test_ivec2_edge_cases ... ok
test test_playerstate_edge_cases ... ok
test test_worldsnapshot_default_construction ... ok
test test_worldsnapshot_empty_collections ... ok
test test_worldsnapshot_with_data ... ok

test result: ok. 12 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests\simulation.rs (target\debug\deps\simulation-3739885095848fe0.exe)

running 2 tests
test test_simulation_determinism ... ok
test test_capture_and_replay_minimal ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests\tools_tests.rs (target\debug\deps\tools_tests-a2a2f062a86fb041.exe)

running 22 tests
test test_astar_same_position ... ok
test test_astar_straight_path ... ok
test test_astar_no_path_available ... ok
test test_astar_with_obstacle ... ok
test test_astar_l_shaped_path ... ok
test test_coordinate_roundtrip ... ok
test test_find_cover_no_cover_available ... ok
test test_find_cover_positions_simple ... ok
test test_find_cover_respects_radius ... ok
test test_glam_to_schema_conversion ... ok
test test_los_blocked_by_obstacle ... ok
test test_los_clear_no_obstacles ... ok
test test_los_horizontal ... ok
test test_los_vertical ... ok
test test_path_blocked_fully ... ok
test test_path_exists_no_obstacles ... ok
test test_path_exists_same_position ... ok
test test_path_exists_with_obstacles ... ok
test test_poi_inactive ... ok
test test_schema_to_glam_conversion ... ok
test test_poi_creation ... ok
test test_tool_ctx_basic_combat ... ok

test result: ok. 22 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests astraweave_core

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

